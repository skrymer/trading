spring.application.name=udgaard
server.servlet.context-path=/udgaard

# PostgreSQL Database Configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/trading
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.username=trading
spring.datasource.password=trading

# HikariCP Connection Pool Configuration
# Configured for batched stock loading during backtests
spring.datasource.hikari.maximum-pool-size=30
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=300000
spring.datasource.hikari.pool-name=TradingHikariPool

# jOOQ dialect
spring.jooq.sql-dialect=POSTGRES

# Flyway Migration Configuration
spring.flyway.enabled=false
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=1
spring.flyway.locations=classpath:db/migration
spring.flyway.out-of-order=false
spring.flyway.validate-on-migrate=true

# Ovtlyr API Configuration
ovtlyr.header.projectId=Ovtlyr.com_project1 
ovtlyr.stockinformation.baseUrl=https://console.ovtlyr.com/dashboard?handler=AjaxGetDashboardChartData
ovtlyr.marketbreadth.baseUrl=https://console.ovtlyr.com/market-breadth?handler=GetFormulaDashboardPlotValues
ovtlyr.performance.baseUrl=https://console.ovtlyr.com/dashboard?handler=AjaxGetPerformanceSummaryWithFiltersAndSort
ovtlyr.screener.baseUrl=https://console.ovtlyr.com/stocks-etfs?handler=GetStocks
# Credentials are loaded from secure.properties (development) or ~/.trading-app/config.properties (production)
# Configure credentials via Settings UI

# Alpha Vantage API Configuration
# Documentation: https://www.alphavantage.co/documentation/
# Get your free API key at: https://www.alphavantage.co/support/#api-key
# API key is loaded from secure.properties (development) or ~/.trading-app/config.properties (production)
# Configure API key via Settings UI
alphavantage.api.baseUrl=https://www.alphavantage.co/query

# Provider-Specific Rate Limits
# AlphaVantage:
# - Free tier: 5 requests/second (max), 5 requests/minute, 500 requests/day
# - Premium tier: 5 requests/second (max), 75 requests/minute, 75,000 requests/day
# - Ultimate tier: 5 requests/second (max), 120 requests/minute, 120,000 requests/day
# Note: AlphaVantage enforces 5 requests/second max across all tiers
provider.alphavantage.requestsPerSecond=5
provider.alphavantage.requestsPerMinute=75
provider.alphavantage.requestsPerDay=75000

# Future providers can be added here:
# provider.yahoo.requestsPerSecond=10
# provider.yahoo.requestsPerMinute=600
# provider.yahoo.requestsPerDay=10000

# MCP Server Configuration
spring.ai.mcp.server.name=backtesting-mcp-server
spring.ai.mcp.server.version=1.0.0
spring.ai.mcp.server.type=SYNC
spring.ai.mcp.server.instructions=This server provides stock information tools
spring.ai.mcp.server.base-url=/udgaard
spring.ai.mcp.server.sse-message-endpoint=/mcp/messages
spring.ai.mcp.server.capabilities.tool=true
spring.ai.mcp.server.capabilities.resource=true
spring.ai.mcp.server.capabilities.prompt=true
spring.ai.mcp.server.capabilities.completion=true

# Actuator Configuration
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always

# Cache Configuration
spring.cache.type=caffeine
spring.cache.cache-names=stocks,backtests
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=30m

# HTTP Timeout Configuration
# Increase timeouts for long-running backtests and Monte Carlo simulations
spring.mvc.async.request-timeout=1800000
server.tomcat.connection-timeout=1800000
server.tomcat.keep-alive-timeout=1800000
spring.task.execution.pool.keep-alive=1800s

# Logging Configuration
logging.file.name=logs/udgaard.log
logging.level.root=INFO
logging.level.com.skrymer.udgaard=DEBUG
logging.level.com.skrymer.udgaard.integration.alphavantage=DEBUG
logging.level.com.skrymer.udgaard.integration.ibkr=DEBUG
logging.level.com.skrymer.udgaard.integration.broker=DEBUG
logging.level.com.skrymer.udgaard.service.StockService=DEBUG
logging.level.com.skrymer.udgaard.service.BrokerIntegrationService=DEBUG
logging.level.com.skrymer.udgaard.controller=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Startup Performance Optimizations
spring.main.lazy-initialization=false
spring.jmx.enabled=false
