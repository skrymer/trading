spring.application.name=udgaard
server.servlet.context-path=/udgaard

# H2 Database Configuration
spring.datasource.url=jdbc:h2:file:~/.trading-app/database/trading;AUTO_SERVER=TRUE;DB_CLOSE_DELAY=-1
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# H2 Console (for development - disable in production)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Ovtlyr API Configuration
ovtlyr.header.projectId=Ovtlyr.com_project1
ovtlyr.stockinformation.baseUrl=https://console.ovtlyr.com/dashboard?handler=AjaxGetCombineChartData
ovtlyr.marketbreadth.baseUrl=https://console.ovtlyr.com/market-breadth?handler=GetFormulaDashboardPlotValues
ovtlyr.performance.baseUrl=https://console.ovtlyr.com/dashboard?handler=AjaxGetPerformanceSummaryWithFiltersAndSort
ovtlyr.screener.baseUrl=https://console.ovtlyr.com/stocks-etfs?handler=GetStocks
# Credentials are loaded from ~/.trading-app/config.properties or can be configured via Settings UI
ovtlyr.cookies.token=${ovtlyr.cookies.token:}
ovtlyr.cookies.userid=${ovtlyr.cookies.userid:}

# Alpha Vantage API Configuration
# Documentation: https://www.alphavantage.co/documentation/
# Get your free API key at: https://www.alphavantage.co/support/#api-key
# API key is loaded from ~/.trading-app/config.properties or can be configured via Settings UI
alphavantage.api.key=${alphavantage.api.key:}
alphavantage.api.baseUrl=https://www.alphavantage.co/query

# MCP Server Configuration
spring.ai.mcp.server.name=backtesting-mcp-server
spring.ai.mcp.server.version=1.0.0
spring.ai.mcp.server.type=SYNC
spring.ai.mcp.server.instructions=This server provides stock information tools
spring.ai.mcp.server.sse-message-endpoint=/mcp/messages
spring.ai.mcp.server.capabilities.tool=true
spring.ai.mcp.server.capabilities.resource=true
spring.ai.mcp.server.capabilities.prompt=true
spring.ai.mcp.server.capabilities.completion=true

# Actuator Configuration
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always

# Cache Configuration
spring.cache.type=caffeine
spring.cache.cache-names=stocks,backtests,marketBreadth
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=30m

# HTTP Timeout Configuration
# Increase timeouts for long-running backtests and Monte Carlo simulations
spring.mvc.async.request-timeout=1800000
server.tomcat.connection-timeout=1800000
server.tomcat.keep-alive-timeout=1800000
spring.task.execution.pool.keep-alive=1800s

# Logging Configuration
logging.level.root=INFO
logging.level.com.skrymer.udgaard=DEBUG
logging.level.com.skrymer.udgaard.integration.alphavantage=DEBUG
logging.level.com.skrymer.udgaard.service.StockService=DEBUG
logging.level.com.skrymer.udgaard.controller=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Startup Performance Optimizations
spring.main.lazy-initialization=false
spring.jpa.open-in-view=false
spring.jmx.enabled=false
